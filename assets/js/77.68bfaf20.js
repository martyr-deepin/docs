(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{693:function(t,a,e){"use strict";e.r(a);var r=e(46),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[e("strong",[t._v("DBackgroundGroup 移除一项后，下边的圆角没有刷新")])]),t._v(" "),e("h2",{attrs:{id:"问题描述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),e("h3",{attrs:{id:"使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),e("p",[t._v("在使用"),e("code",[t._v("DBackgroundGroup")]),t._v("作为背景框时，通常是先创建一个布局，然后往布局里边添加控件，在把这个布局设置给"),e("code",[t._v("DBackgroundGroup")]),t._v("。")]),t._v(" "),e("br"),t._v(" "),e("h3",{attrs:{id:"问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),e("p",[t._v("当需要把布局中最后一个控件移除布局时，此时在显示界面可以发现"),e("code",[t._v("DBackgroundGroup")]),t._v("下边的圆角无法像之前一样正常的绘制出来，变成了直角。")]),t._v(" "),e("br"),t._v(" "),e("h3",{attrs:{id:"分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分析"}},[t._v("#")]),t._v(" 分析")]),t._v(" "),e("p",[t._v("通过查看"),e("code",[t._v("DBackgroundGroup")]),t._v("的源码可以发现，在更新布局后要再次绘制圆角需要满足以下条件：")]),t._v(" "),e("ol",[e("li",[t._v("确保"),e("code",[t._v("DBackgroundGroup::event(QEvent *event)")]),t._v("中的事件类型为"),e("code",[t._v("QEvent::ChildRemoved")]),t._v("；")]),t._v(" "),e("li",[t._v("确保从布局中移除的控件已经从"),e("code",[t._v("DBackgroundGroup")]),t._v("的子列表中移除（控件加入布局会成为"),e("code",[t._v("DBackgroundGroup")]),t._v("子列表的一员）；")])]),t._v(" "),e("br"),t._v(" "),e("h2",{attrs:{id:"解决方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[t._v("#")]),t._v(" 解决方法")]),t._v(" "),e("h3",{attrs:{id:"qlayout-removewidget存在的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#qlayout-removewidget存在的问题"}},[t._v("#")]),t._v(" "),e("code",[t._v("QLayout::removeWidget")]),t._v("存在的问题")]),t._v(" "),e("p",[t._v("当使用该函数把控件从布局中移除时：")]),t._v(" "),e("ul",[e("li",[t._v("没有把控件从"),e("code",[t._v("DBackgroundGroup")]),t._v("的子列表中移除，也就是该控件的父类仍是"),e("code",[t._v("DBackgroundGroup")]),t._v("。")]),t._v(" "),e("li",[t._v("也没有发出"),e("code",[t._v("QEvent::ChildRemoved")]),t._v("事件，导致"),e("code",[t._v("DBackgroundGroup")]),t._v("不会刷新重新绘制。")])]),t._v(" "),e("br"),t._v(" "),e("h3",{attrs:{id:"使用deletelater函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用deletelater函数"}},[t._v("#")]),t._v(" 使用"),e("code",[t._v("deleteLater")]),t._v("函数")]),t._v(" "),e("p",[t._v("控件"),e("code",[t._v("addWidget")]),t._v("添加布局，正常显示圆角。 控件"),e("code",[t._v("removeWidget")]),t._v("移除布局，同时调用"),e("code",[t._v("deleteLater")]),t._v("脱离父子关系，正常显示圆角。")]),t._v(" "),e("div",{staticClass:"language-cpp extra-class"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m_customMtu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//移除控件后可以显示圆角")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("m_customMtu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    m_customMtu"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteLater")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);